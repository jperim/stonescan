"use strict";(self["webpackChunkstonescan"]=self["webpackChunkstonescan"]||[]).push([[276],{8276:(e,a,t)=>{t.r(a),t.d(a,{default:()=>T});var o=t(3673),l=t(2323);const n={class:"q-gutter-y-sm"},r={key:0},c={class:"text-h6 text-orange-9"},i={class:"text-overline"},s={class:"text-h5 text-grey"},m=(0,o.Uk)("Bloco"),d={class:"q-gutter-sm"};function u(e,a,t,u,p,b){const g=(0,o.up)("q-card-section"),f=(0,o.up)("q-card"),w=(0,o.up)("q-btn"),v=(0,o.up)("q-space"),_=(0,o.up)("q-icon"),h=(0,o.up)("q-input"),k=(0,o.up)("q-td"),C=(0,o.up)("q-table"),W=(0,o.up)("q-tab"),I=(0,o.up)("q-tabs"),q=(0,o.up)("q-footer"),y=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)("div",n,[e.showItem?((0,o.wg)(),(0,o.j4)(y,{key:1})):((0,o.wg)(),(0,o.j4)("div",r,[(0,o.Wm)(f,{flat:"",bordered:"",class:"my-card bg-grey-1"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)("div",c,"Marcação #"+(0,l.zw)(e.marcacaoCurrent.id),1),(0,o.Wm)("div",i,(0,l.zw)(e.dateFormattedString(e.marcacaoCurrent.data))+" - "+(0,l.zw)(e.marcacaoCurrent.fornecedor.nome),1),(0,o.Wm)("div",s,"Total: "+(0,l.zw)(Number(e.totalGeral).toFixed(2)),1)])),_:1})])),_:1}),(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C,{rows:e.marcacaoitens,columns:e.table_columns,"row-key":"id",loading:e.table_loading,flat:"","virtual-scroll":"",pagination:e.table_pagination,"onUpdate:pagination":a[3]||(a[3]=a=>e.table_pagination=a),"rows-per-page-options":[0],"no-data-label":"Nenhum registro..."},{top:(0,o.w5)((()=>[(0,o.Wm)(w,{color:"secondary",icon:"add",onClick:a[1]||(a[1]=a=>e.openItem(void 0))},{default:(0,o.w5)((()=>[m])),_:1}),(0,o.Wm)(v),(0,o.Wm)(h,{borderless:"",dense:"",debounce:"300",modelValue:e.table_filter,"onUpdate:modelValue":a[2]||(a[2]=a=>e.table_filter=a),placeholder:"Pesquisa"},{append:(0,o.w5)((()=>[(0,o.Wm)(_,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-action":(0,o.w5)((a=>[(0,o.Wm)(k,{props:a},{default:(0,o.w5)((()=>[(0,o.Wm)("div",d,[(0,o.Wm)(w,{dense:"",color:"primary",flat:"",icon:"edit",onClick:t=>e.openItem(a.row)},null,8,["onClick"]),(0,o.Wm)(w,{dense:"",color:"red",flat:"",icon:"delete",onClick:t=>e.removeItem(a.row)},null,8,["onClick"])])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading","pagination"])])),_:1}),(0,o.Wm)(q,{elevated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{"inline-label":"",shrink:"",stretch:"","no-caps":""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{name:"voltar",icon:"arrow_back",label:"Voltar",onClick:a[4]||(a[4]=a=>e.sairForm())})])),_:1})])),_:1})]))])}t(9544);var p=t(8825),b=t(1082),g=t(1959),f=t(7874);const w=(0,o.aZ)({name:"MarcacaoEditCpn",setup(){const e=(0,p.Z)(),a=(0,f.oR)(),t=(0,g.iH)(void 0),l=(0,g.iH)(!1),n=(0,g.iH)(""),r=(0,g.iH)("list"),c=(0,g.iH)(!1),i=(0,g.iH)([{name:"action",align:"center",label:"",field:"action"},{name:"numbloco",align:"left",label:"Nº Bloco",field:"numbloco",sortable:!0},{name:"produto",align:"left",label:"Material",field:e=>e.produto.descricao,sortable:!0},{name:"total",align:"right",label:"Total $",field:e=>_(e).toFixed(2)}]),s=(0,o.f3)("setEditando");function m(e){t.value=e,l.value=!0,this.$router.push({name:"marcacao-bloco-item"})}async function d(e){a.dispatch("marcacao/saveItem",e)}async function u(t){e.dialog({title:"Confirma",message:"Exclusão deste bloco "+t.numbloco+"?",cancel:!0,persistent:!0}).onOk((()=>{a.dispatch("marcacao/removeItem",t)}))}function w(){s(!1),this.$router.back()}function v(e){return Number(parseFloat(e.medlcomp*e.medlalt*e.medllarg).toFixed(3))}function _(e){let a=v(e)*e.valor;return Number(a.toFixed(2))}const h=(0,o.Fl)((()=>a.getters["marcacao/getMarcacaoCurrent"])),k=(0,o.Fl)((()=>a.getters["marcacao/getItensMarcacao"])),C=(0,o.Fl)((()=>a.getters["marcacao/getTotal"]));function W(e){return b.ZP.formatDate(e,"DD/MM/YYYY")}return(0,o.bv)((async()=>{c.value=!0,await a.dispatch("marcacao/FetchAll_Itens").finally((()=>{c.value=!1}))})),(0,o.JJ)("itemCurrent",t),(0,o.JJ)("addItem",d),(0,o.JJ)("showItem",l),{table_filter:n,table_mode:r,table_columns:i,table_loading:c,table_pagination:(0,g.iH)({rowsPerPage:50}),marcacaoCurrent:h,marcacaoitens:k,sairForm:w,setEditando:s,showItem:l,openItem:m,removeItem:u,getTotalM3Liq:v,getTotalItem:_,totalGeral:C,dateFormattedString:W}}});var v=t(151),_=t(5589),h=t(6429),k=t(2165),C=t(2025),W=t(4842),I=t(4554),q=t(3884),y=t(1762),F=t(7547),Z=t(3269),Q=t(7518),x=t.n(Q);w.render=u;const T=w;x()(w,"components",{QCard:v.Z,QCardSection:_.Z,QTable:h.Z,QBtn:k.Z,QSpace:C.Z,QInput:W.Z,QIcon:I.Z,QTd:q.Z,QFooter:y.Z,QTabs:F.Z,QTab:Z.Z})}}]);