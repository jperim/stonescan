"use strict";(self["webpackChunkstonescan"]=self["webpackChunkstonescan"]||[]).push([[655],{7655:(a,e,o)=>{o.r(e),o.d(e,{default:()=>z});var l=o(3673);const t={style:{"max-width":"800px"}},r=(0,l.Uk)("Marcação"),s={class:"fit row q-gutter-xs"},c={class:"col-xs-12 col-sm-auto"},n=(0,l.Wm)("br",null,null,-1),u={class:"col-xs-12 col-sm-grow"},i=(0,l.Uk)(" Nenhum registro "),d={class:"fit row q-gutter-xs"},m={class:"col-xs-12 col-sm-auto"},p=(0,l.Wm)("br",null,null,-1),v={class:"col-xs-12 col-sm-grow"},f={class:"col-xs-12 col-sm-grow"},b={class:"col-xs-12 col-sm-auto"},g=(0,l.Wm)("br",null,null,-1),W={class:"fit row q-gutter-xs"},w={class:"col-xs-12 col-sm-grow"};function x(a,e,o,x,V,h){const q=(0,l.up)("q-toolbar-title"),k=(0,l.up)("q-toolbar"),C=(0,l.up)("q-input"),Z=(0,l.up)("q-item-section"),F=(0,l.up)("q-item"),M=(0,l.up)("q-select"),y=(0,l.up)("q-form"),Q=(0,l.up)("q-tab"),U=(0,l.up)("q-tabs"),_=(0,l.up)("q-footer");return(0,l.wg)(),(0,l.j4)("div",t,[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(q,null,{default:(0,l.w5)((()=>[r])),_:1})])),_:1}),(0,l.Wm)(y,{ref:"frmMarca",class:"q-mr-sm q-gutter-xs"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",s,[(0,l.Wm)("div",c,[(0,l.Wm)(C,{modelValue:a.marcacao.data,"onUpdate:modelValue":e[1]||(e[1]=e=>a.marcacao.data=e),outlined:"",type:"date",label:"Data",readonly:""},null,8,["modelValue"]),n]),(0,l.Wm)("div",u,[(0,l.Wm)(M,{outlined:"",modelValue:a.marcacao.fornecedor,"onUpdate:modelValue":e[2]||(e[2]=e=>a.marcacao.fornecedor=e),options:a.fornecedores,label:"Fornecedor","option-value":"id","option-label":"nome",clearable:"","use-input":"","input-debounce":"0",behavior:"dialog",onFilter:a.filterFornecedor,"lazy-rules":"",rules:[a.$rules.required("Campo obrigatório")]},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(F,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{class:"text-grey"},{default:(0,l.w5)((()=>[i])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter","rules"])])]),(0,l.Wm)("div",d,[(0,l.Wm)("div",m,[(0,l.Wm)(C,{outlined:"",modelValue:a.marcacao.valortotal,"onUpdate:modelValue":e[3]||(e[3]=e=>a.marcacao.valortotal=e),label:"Valor Total",prefix:"$",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right",disable:""},null,8,["modelValue"]),p]),(0,l.Wm)("div",v,[(0,l.Wm)(M,{outlined:"",modelValue:a.marcacao.condicao,"onUpdate:modelValue":e[4]||(e[4]=e=>a.marcacao.condicao=e),options:a.condicoes,label:"Condição de Pagamento","option-value":"id","option-label":"descricao",clearable:"","lazy-rules":"",rules:[a.$rules.required("Campo obrigatório")]},null,8,["modelValue","options","rules"])]),(0,l.Wm)("div",f,[(0,l.Wm)(M,{outlined:"",modelValue:a.marcacao.moeda,"onUpdate:modelValue":e[5]||(e[5]=e=>a.marcacao.moeda=e),options:a.moedas,label:"Moeda","option-value":"id","option-label":"descricao",clearable:"","lazy-rules":"",rules:[a.$rules.required("Campo obrigatório")]},null,8,["modelValue","options","rules"])]),(0,l.Wm)("div",b,[(0,l.Wm)(C,{outlined:"",modelValue:a.marcacao.taxa,"onUpdate:modelValue":e[6]||(e[6]=e=>a.marcacao.taxa=e),label:"Taxa",mask:"#.###","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right"},null,8,["modelValue"]),g])]),(0,l.Wm)("div",W,[(0,l.Wm)("div",w,[(0,l.Wm)(C,{modelValue:a.marcacao.observacao,"onUpdate:modelValue":e[7]||(e[7]=e=>a.marcacao.observacao=e),modelModifiers:{trim:!0},label:"Observação",outlined:"",autogrow:""},null,8,["modelValue"])])])])),_:1},512),(0,l.Wm)(_,{elevated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{"inline-label":"",shrink:"",stretch:"","no-caps":""},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{name:"save",icon:"save",label:"Gravar",onClick:e[8]||(e[8]=e=>a.saveForm())}),(0,l.Wm)(Q,{name:"cancel",icon:"cancel",label:"Cancelar",onClick:e[9]||(e[9]=e=>a.sairForm())})])),_:1})])),_:1})])}o(71);var V=o(8825),h=o(1185),q=o(1082),k=o(1959),C=o(7874);const Z=(0,l.aZ)({name:"MarcacaoEditCpn",setup(){const a=(0,V.Z)(),e=(0,C.oR)(),o=(0,k.iH)(void 0),t=(0,k.iH)([]),r=(0,k.iH)([]),s=(0,k.iH)([]),c=(0,k.iH)([]),n=(0,l.f3)("setEditando");function u(a){const l=q.ZP.formatDate(Date.now(),"YYYY-MM-DD");o.value=Object.assign({},a||{id:-1,chave:(0,h.Z)(),data:l,fornecedor:null,valortotal:0,qtde_bloco:0,condicao:null,moeda:null,taxa:0,observacao:"",usuario:e.getters["usuario/usuario"],situacao:e.getters["situacao/getSituacao"](1)})}function i(a,e){e(""!==a?()=>{const e=a.toLowerCase();t.value=r.value.filter((a=>a.nome.toLowerCase().indexOf(e)>-1))}:()=>{t.value=r.value})}function d(){this.$refs.frmMarca.validate().then((l=>{l?Promise.all([e.dispatch("marcacao/saveMarcacao",o.value),e.dispatch("marcacao/FetchAll")]).then((()=>{a.notify("Marcação gravada com sucesso!"),n(!1),this.$router.back()})):a.notify({type:"negative",message:"Existem dados inválidos."})}))}function m(){n(!1),this.$router.back()}return(0,l.wF)((()=>{u(e.getters["marcacao/getMarcacaoCurrent"]),t.value=e.getters["fornecedor/fornecedores"],r.value=e.getters["fornecedor/fornecedores"],s.value=e.getters["moeda/moedas"],c.value=e.getters["condicao/condicoes"]})),{marcacao:o,fornecedores:t,fornecedoresClone:r,moedas:s,condicoes:c,filterFornecedor:i,sairForm:m,saveForm:d,setEditando:n}}});var F=o(9570),M=o(3747),y=o(5269),Q=o(4842),U=o(8516),_=o(3414),T=o(2035),$=o(1762),D=o(7547),H=o(3269),E=o(7518),Y=o.n(E);Z.render=x;const z=Z;Y()(Z,"components",{QToolbar:F.Z,QToolbarTitle:M.Z,QForm:y.Z,QInput:Q.Z,QSelect:U.Z,QItem:_.Z,QItemSection:T.Z,QFooter:$.Z,QTabs:D.Z,QTab:H.Z})}}]);