"use strict";(self["webpackChunkstonescan"]=self["webpackChunkstonescan"]||[]).push([[100],{9100:(e,l,a)=>{a.r(l),a.d(l,{default:()=>te});var o=a(3673);const m=(0,o.Uk)("Bloco"),t={class:"fit row q-gutter-xs"},s={class:"col-xs-12 col-sm-grow"},r={class:"col-xs-12 col-sm-4"},i={class:"fit row q-gutter-xs"},u={class:"col-xs-12 col-sm-auto"},c={class:"col-xs-12 col-sm-grow"},d=(0,o.Wm)("br",null,null,-1),n={class:"fit row q-gutter-y-xs"},p={class:"col-xs-4 col-sm-4"},v={class:"col-xs-4 col-sm-4"},g={class:"col-xs-4 col-sm-4"},f={class:"col-xs-12 col-sm-grow"},b=(0,o.Wm)("br",null,null,-1),V={class:"fit row q-gutter-y-xs"},W={class:"col-xs-4 col-sm-4"},x={class:"col-xs-4 col-sm-4"},k={class:"col-xs-4 col-sm-4"},h={class:"col-xs-12 col-sm-grow"},w=(0,o.Wm)("br",null,null,-1),q={class:"fit row q-gutter-xs"},$={class:"col-xs-12 col-sm-auto"},y={class:"col-xs-12 col-sm-grow"},C=(0,o.Wm)("br",null,null,-1),F={class:"col-xs-12 col-sm-grow"},I={class:"fit row q-gutter-xs"},U={class:"col-xs-12 col-sm-grow"},Z=(0,o.Wm)("br",null,null,-1);function j(e,l,a,j,z,Q){const B=(0,o.up)("q-toolbar-title"),M=(0,o.up)("q-toolbar"),T=(0,o.up)("q-select"),L=(0,o.up)("q-input"),R=(0,o.up)("q-uploader"),_=(0,o.up)("q-form"),H=(0,o.up)("marcacao-carousel"),A=(0,o.up)("q-tab"),D=(0,o.up)("q-tabs"),S=(0,o.up)("q-footer");return(0,o.wg)(),(0,o.j4)("div",null,[(0,o.Wm)(M,null,{default:(0,o.w5)((()=>[(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[m])),_:1})])),_:1}),(0,o.Wm)(_,{ref:"frmItem",class:"q-mr-sm q-gutter-xs"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",t,[(0,o.Wm)("div",s,[(0,o.Wm)(T,{outlined:"",modelValue:e.marcacaoitem.produto,"onUpdate:modelValue":l[1]||(l[1]=l=>e.marcacaoitem.produto=l),options:e.produtos,label:"Material","option-value":"id","option-label":"descricao",clearable:"","lazy-rules":"",rules:[e.$rules.required("Campo obrigatório")]},null,8,["modelValue","options","rules"])]),(0,o.Wm)("div",r,[(0,o.Wm)(T,{outlined:"",modelValue:e.marcacaoitem.classif,"onUpdate:modelValue":l[2]||(l[2]=l=>e.marcacaoitem.classif=l),options:e.classificacoes,label:"Classificação","option-value":"id","option-label":"descricao",clearable:"","lazy-rules":"",rules:[e.$rules.required("Campo obrigatório")]},null,8,["modelValue","options","rules"])])]),(0,o.Wm)("div",i,[(0,o.Wm)("div",u,[(0,o.Wm)(L,{outlined:"",modelValue:e.marcacaoitem.numbloco,"onUpdate:modelValue":l[3]||(l[3]=l=>e.marcacaoitem.numbloco=l),modelModifiers:{trim:!0},label:"Nº Bloco","lazy-rules":"",rules:[e.$rules.required("Campo obrigatório")]},null,8,["modelValue","rules"])]),(0,o.Wm)("div",c,[(0,o.Wm)(L,{outlined:"",modelValue:e.marcacaoitem.numpedreira,"onUpdate:modelValue":l[4]||(l[4]=l=>e.marcacaoitem.numpedreira=l),modelModifiers:{trim:!0},label:"Nº Bloco Pedreira"},null,8,["modelValue"])])]),d,(0,o.Wm)("div",n,[(0,o.Wm)("div",p,[(0,o.Wm)(L,{outlined:"",modelValue:e.marcacaoitem.medbcomp,"onUpdate:modelValue":l[5]||(l[5]=l=>e.marcacaoitem.medbcomp=l),label:"Comp.(Bruto)",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right","lazy-rules":"",rules:[e.$rules.required("Campo obrigatório"),e.$rules.decimal(),e.$rules.between(.5,4,"Valor inválido")]},null,8,["modelValue","rules"])]),(0,o.Wm)("div",v,[(0,o.Wm)(L,{outlined:"",modelValue:e.marcacaoitem.medbalt,"onUpdate:modelValue":l[6]||(l[6]=l=>e.marcacaoitem.medbalt=l),label:"Alt.(Bruto)",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right","lazy-rules":"",rules:[e.$rules.required("Campo obrigatório"),e.$rules.decimal(),e.$rules.between(.5,4,"Valor inválido")]},null,8,["modelValue","rules"])]),(0,o.Wm)("div",g,[(0,o.Wm)(L,{outlined:"",modelValue:e.marcacaoitem.medblarg,"onUpdate:modelValue":l[7]||(l[7]=l=>e.marcacaoitem.medblarg=l),label:"Larg.(Bruto)",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right","lazy-rules":"",rules:[e.$rules.required("Campo obrigatório"),e.$rules.decimal(),e.$rules.between(.5,4,"Valor inválido")]},null,8,["modelValue","rules"])]),(0,o.Wm)("div",f,[(0,o.Wm)(L,{outlined:"",modelValue:e.medBtotal,"onUpdate:modelValue":l[8]||(l[8]=l=>e.medBtotal=l),label:"Total(Bruto)",mask:"#.###","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right",disable:""},null,8,["modelValue"])])]),b,(0,o.Wm)("div",V,[(0,o.Wm)("div",W,[(0,o.Wm)(L,{outlined:"",modelValue:e.marcacaoitem.medlcomp,"onUpdate:modelValue":l[9]||(l[9]=l=>e.marcacaoitem.medlcomp=l),label:"Comp.(Líquido)",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right","lazy-rules":"",rules:[e.$rules.required("Campo obrigatório"),e.$rules.decimal(),e.$rules.between(.5,4,"Valor inválido")]},null,8,["modelValue","rules"])]),(0,o.Wm)("div",x,[(0,o.Wm)(L,{outlined:"",modelValue:e.marcacaoitem.medlalt,"onUpdate:modelValue":l[10]||(l[10]=l=>e.marcacaoitem.medlalt=l),label:"Alt.(Líquido)",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right","lazy-rules":"",rules:[e.$rules.required("Campo obrigatório"),e.$rules.decimal(),e.$rules.between(.5,4,"Valor inválido")]},null,8,["modelValue","rules"])]),(0,o.Wm)("div",k,[(0,o.Wm)(L,{outlined:"",modelValue:e.marcacaoitem.medllarg,"onUpdate:modelValue":l[11]||(l[11]=l=>e.marcacaoitem.medllarg=l),label:"Larg.(Líquido)",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right","lazy-rules":"",rules:[e.$rules.required("Campo obrigatório"),e.$rules.decimal(),e.$rules.between(.5,4,"Valor inválido")]},null,8,["modelValue","rules"])]),(0,o.Wm)("div",h,[(0,o.Wm)(L,{outlined:"",modelValue:e.medLtotal,"onUpdate:modelValue":l[12]||(l[12]=l=>e.medLtotal=l),label:"Total(Líquido)",mask:"#.###","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right",disable:""},null,8,["modelValue"])])]),w,(0,o.Wm)("div",q,[(0,o.Wm)("div",$,[(0,o.Wm)(L,{outlined:"",modelValue:e.marcacaoitem.valor,"onUpdate:modelValue":l[13]||(l[13]=l=>e.marcacaoitem.valor=l),label:"Valor Unitário",prefix:"$",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right","lazy-rules":"",rules:[e.$rules.required("Campo obrigatório"),e.$rules.decimal(),e.$rules.minValue(1,"Valor inválido")]},null,8,["modelValue","rules"])]),(0,o.Wm)("div",y,[(0,o.Wm)(L,{outlined:"",modelValue:e.total,"onUpdate:modelValue":l[14]||(l[14]=l=>e.total=l),label:"Valor Total",prefix:"$",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right",disable:""},null,8,["modelValue"])]),C,(0,o.Wm)("div",F,[(0,o.Wm)(L,{outlined:"",modelValue:e.marcacaoitem.pesokg,"onUpdate:modelValue":l[15]||(l[15]=l=>e.marcacaoitem.pesokg=l),prefix:"Kg",label:"Peso",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right","lazy-rules":"",rules:[e.$rules.decimal()]},null,8,["modelValue","rules"])])]),(0,o.Wm)("div",I,[(0,o.Wm)("div",U,[(0,o.Wm)(L,{modelValue:e.marcacaoitem.observacao,"onUpdate:modelValue":l[16]||(l[16]=l=>e.marcacaoitem.observacao=l),modelModifiers:{trim:!0},label:"Observação",outlined:"",autogrow:""},null,8,["modelValue"])])]),Z,(0,o.Wm)(R,{ref:"fotos",style:{width:"100%","max-width":"87vw"},label:"Máximo (4) Fotos - (8 Mb) Tamanho",multiple:"",accept:".jpg, .png, image/*","max-files":"4","hide-upload-btn":"","max-file-size":"8120000","no-thumbnails":"",filter:e.checkFileType,onRejected:e.onRejectedFotos,onAdded:e.fileSelected,onRemoved:e.fileRemoved},null,8,["filter","onRejected","onAdded","onRemoved"])])),_:1},512),e.marcacaoimagem.length>0?((0,o.wg)(),(0,o.j4)(H,{key:0})):(0,o.kq)("",!0),(0,o.Wm)(S,{elevated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{"inline-label":"",shrink:"",stretch:"","no-caps":""},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{name:"save",icon:"save",label:"Gravar",onClick:l[17]||(l[17]=l=>e.saveFormItem())}),(0,o.Wm)(A,{name:"cancel",icon:"cancel",label:"Cancelar",onClick:l[18]||(l[18]=l=>e.showItem=!1)})])),_:1})])),_:1})])}a(71);var z=a(8825),Q=a(1185),B=a(1959),M=a(7874),T=a(1741);const L={class:"q-pa-md row items-start q-gutter-md"};function R(e,l,a,m,t,s){const r=(0,o.up)("q-img"),i=(0,o.up)("q-btn"),u=(0,o.up)("q-card-actions"),c=(0,o.up)("q-card-section"),d=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)("div",L,[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(m.imagens,(l=>((0,o.wg)(),(0,o.j4)(d,{style:e.$q.screen.xs?"width: 100%":"width: 40%",flat:"",bordered:"",key:l.id},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{horizontal:""},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{src:l.base64},null,8,["src"]),(0,o.Wm)(u,{vertical:"",class:"justify-around q-px-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{flat:"",round:"",color:"red",icon:"delete",onClick:e=>m.onDeleteImagem(l)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["style"])))),128))])}const _={name:"MarcacaoCarousel",setup(){const e=(0,B.iH)((0,o.f3)("marcacaoimagem")),l=(0,o.f3)("onDeleteImagem");return{imagens:e,onDeleteImagem:l}}};var H=a(151),A=a(5589),D=a(4027),S=a(9367),J=a(2165),E=a(7518),O=a.n(E);_.render=R;const K=_;O()(_,"components",{QCard:H.Z,QCardSection:A.Z,QImg:D.Z,QCardActions:S.Z,QBtn:J.Z});const N=(0,o.aZ)({components:{MarcacaoCarousel:K},name:"MarcacaoitemEditCpn",setup(){const e=(0,z.Z)(),l=(0,M.oR)(),a=(0,B.iH)([]),m=(0,B.iH)([]),t=(0,B.iH)([]),s=(0,B.iH)([]),r=(0,B.iH)((0,o.f3)("showItem")),i=(0,o.f3)("addItem"),u=(0,o.f3)("itemCurrent");function c(e){a.value=Object.assign({},e||{id:-1*(Math.floor(100*Math.random())+1),idmarcacao:null,produto:null,classif:null,numbloco:"",numpedreira:"",medbcomp:0,medbalt:0,medblarg:0,medlcomp:0,medlalt:0,medllarg:0,valor:0,pesokg:0,observacao:"",imagens:[]})}const d=(0,o.Fl)((()=>parseFloat(a.value.medbcomp*a.value.medbalt*a.value.medblarg).toFixed(3))),n=(0,o.Fl)((()=>parseFloat(a.value.medlcomp*a.value.medlalt*a.value.medllarg).toFixed(3))),p=(0,o.Fl)((()=>parseFloat(parseFloat((a.value.medlcomp*a.value.medlalt*a.value.medllarg).toFixed(3))*a.value.valor).toFixed(2)));function v(){this.$refs.frmItem.validate().then((l=>{l?(a.value.imagens=s.value,i(a.value),r.value=!1):e.notify("Existem dados inválidos.")}))}function g(l){e.notify({type:"negative",message:`${l.length} imagem(ns) inválida(s)`})}function f(e){0!==e.length&&e.forEach((l=>{let a=s.value.findIndex((l=>l.name==e[0].name));a<0&&W(l)}))}function b(e){let l=s.value.findIndex((l=>l.name==e[0].name));s.value.splice(l,1)}function V(e){return e.filter((e=>"image/png"===e.type||"image/jpg"===e.type||"image/jpeg"===e.type))}function W(e){let l=e,a=e.name,o="",m=null,t={maxSizeMB:5,maxWidthOrHeight:800,useWebWorker:!0};(0,T.Z)(l,t).then((function(e){T.Z.getDataUrlFromFile(e).then((e=>{m=e})).then((()=>{s.value.push({id:(0,Q.Z)(),name:a,url:o,base64:m})}))})).catch((function(e){console.log(e.message)}))}function x(e){let l=s.value.findIndex((l=>l.id==e.id));s.value.splice(l,1)}return(0,o.JJ)("onDeleteImagem",x),(0,o.JJ)("marcacaoimagem",s),c(u.value),m.value=l.getters["produto/produtos"],t.value=l.getters["classificacao/classificacoes"],(0,o.bv)((async()=>{await l.dispatch("marcacao/FetchAll_Imagens",u.value).then((()=>{s.value=[...l.getters["marcacao/getImagensItem"]],a.value.imagens=s.value}))})),{marcacaoitem:a,produtos:m,classificacoes:t,medBtotal:d,medLtotal:n,total:p,saveFormItem:v,showItem:r,checkFileType:V,fileSelected:f,fileRemoved:b,onRejectedFotos:g,marcacaoimagem:s,onDeleteImagem:x}}});var P=a(9570),G=a(3747),Y=a(5269),X=a(8516),ee=a(4842),le=a(5252),ae=a(1762),oe=a(7547),me=a(3269);N.render=j;const te=N;O()(N,"components",{QToolbar:P.Z,QToolbarTitle:G.Z,QForm:Y.Z,QSelect:X.Z,QInput:ee.Z,QUploader:le.Z,QFooter:ae.Z,QTabs:oe.Z,QTab:me.Z})}}]);